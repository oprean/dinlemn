(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};(function(e){return typeof define=="function"&&define.amd?define(["underscore","backbone","backbone.marionette","exports"],e):typeof exports=="object"?e(require("underscore"),require("backbone"),require("backbone.marionette"),exports):e(_,Backbone,Backbone.Marionette,{})})(function(t,r,i,s){return s=function(s){function o(){return this.destroy=e(this.destroy,this),o.__super__.constructor.apply(this,arguments)}return n(o,s),o.prototype.modals=[],o.prototype.zIndex=0,o.prototype.show=function(e,n){var s,o,u,a,f,l,c,h,p;n==null&&(n={}),this._ensureElement(),r.$("body").css({overflow:"hidden"}),this.modals.length>0&&(s=t.last(this.modals),s.modalEl.addClass(""+s.prefix+"-view--stacked"),u=this.modals[this.modals.length-1],u!=null&&u.modalEl.removeClass(""+u.prefix+"-modal--stacked-reverse")),e.render(n),e.regionEnabled=!0,this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),i.triggerMethodOn(e,"before:show"),this.triggerMethod("swapOut",this.currentView),this.$el.append(e.el),this.currentView=e,this.triggerMethod("swap",e),this.triggerMethod("show",e),i.triggerMethodOn(e,"show"),h=this.modals;for(a=0,l=h.length;a<l;a++)o=h[a],o.undelegateModalEvents();p=this.modals;for(f=0,c=p.length;f<c;f++)o=p[f],o.$el.css({background:"none"});return e.on("modal:destroy",this.destroy),this.modals.push(e),this.zIndex++},o.prototype.destroy=function(){var e,n;n=this.currentView;if(!n)return;return n.destroy&&!n.isDestroyed?n.destroy():n.remove&&n.remove(),n.off("modal:destroy",this.destroy),this.modals.splice(t.indexOf(this.modals,n),1),this.zIndex--,this.currentView=this.modals[this.zIndex-1],e=t.last(this.modals),e&&(e.$el.removeAttr("style"),e.modalEl.addClass(""+e.prefix+"-modal--stacked-reverse"),t.delay(function(t){return function(){return e.modalEl.removeClass(""+e.prefix+"-modal--stacked")}}(this),300),this.zIndex!==0&&e.delegateModalEvents()),this.zIndex===0&&r.$("body").css({overflow:"visible"}),this.triggerMethod("modal:destroy",n)},o.prototype.destroyAll=function(){var e,t,n,r,i;r=this.modals,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.destroy());return i},o}(i.Region),i.Modals=s,i.Modals})}).call(this);